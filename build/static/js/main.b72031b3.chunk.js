(this.webpackJsonpcomplaintdesk=this.webpackJsonpcomplaintdesk||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),o=a.n(r),l=(a(74),a(75),a(48),a(11)),s=a(15),i=a(16),u=a(14),m=a(26),p=a(25),d=a(10),f=a(2),h=a.n(f),b=a(128),v=a(129),E=a(130),g=a(133),y=a(131),O=a(132),w=a(20),_=a(32),k=a(13),C=a(3),N=a.n(C),j=a(9),S=a(8),x=a.n(S),A=function(){return function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,x.a.get("/auth/users/me/",a);case 5:n=e.sent,t({type:"USER_LOADED_SUCCESS",payload:n.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:"USER_LOADED_FAIL"});case 12:e.next=15;break;case 14:t({type:"USER_LOADED_FAIL"});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},I=a(29),L=a(67),D=a(68),T=a(5),U={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:!1,user:null},F=Object(I.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"AUTHENTICATED_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0});case"LOGIN_SUCCESS":return localStorage.setItem("access",n.access),Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh});case"USER_LOADED_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{user:n});case"SIGNUP_SUCCESS":return Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!1});case"AUTHENTICATED_FAIL":return Object(T.a)(Object(T.a)({},e),{},{access:null,isAuthenticated:!1});case"USER_LOADED_FAIL":return Object(T.a)(Object(T.a)({},e),{},{user:null});case"GOOGLE_AUTH_SUCCESS":case"FACEBOOK_AUTH_SUCCESS":return localStorage.setItem("access",n.access),localStorage.setItem("refresh",n.refresh),Object(T.a)(Object(T.a)({},e),{},{isAuthenticated:!0,access:n.access,refresh:n.refresh});case"GOOGLE_AUTH_FAIL":case"FACEBOOK_AUTH_FAIL":case"SIGNUP_FAIL":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Object(T.a)(Object(T.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});default:return e}}}),R=[D.a],G=Object(I.createStore)(F,{},Object(L.composeWithDevTools)(I.applyMiddleware.apply(void 0,R))),P=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={isNavOpen:!1,redirect:!1},n.toggleNav=n.toggleNav.bind(Object(u.a)(n)),n.handlelogout=n.handlelogout.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"toggleNav",value:function(){this.setState({isNavOpen:!this.state.isNavOpen})}},{key:"handlelogout",value:function(){G.dispatch({type:"LOGOUT"}),this.setState({redirect:!0})}},{key:"render",value:function(){return c.a.createElement(n.Fragment,null,c.a.createElement(b.a,{dark:!0,className:"sticky-top ".concat(h.a.nvbr),expand:"md"},c.a.createElement("div",{className:"container"},c.a.createElement(v.a,{onClick:this.toggleNav,className:h.a.abslt}),c.a.createElement(E.a,{className:"mr-auto "},c.a.createElement(d.c,{to:"/",className:h.a.navlink},c.a.createElement(w.a,{icon:_.b}),"\xa0ComplaintDesk")),c.a.createElement(g.a,{isOpen:this.state.isNavOpen,navbar:!0},c.a.createElement(y.a,{navbar:!0,className:"ml-auto"},c.a.createElement(O.a,null,c.a.createElement(d.c,{className:"".concat(h.a.navlink),to:"/newcomplaint"},c.a.createElement(w.a,{icon:_.c}),"\xa0New Complaint\xa0\xa0")),c.a.createElement(O.a,null,c.a.createElement(d.c,{className:"".concat(h.a.navlink),to:"/pastcomplaints"},c.a.createElement(w.a,{icon:_.a}),"\xa0Past Complaints\xa0\xa0")),this.props.isAuthenticated?c.a.createElement(O.a,null,c.a.createElement(d.c,{className:"".concat(h.a.navlink),to:"#!",onClick:this.handlelogout},c.a.createElement(w.a,{icon:_.e}),"\xa0Logout")):c.a.createElement(O.a,null,c.a.createElement(d.c,{className:"".concat(h.a.navlink),to:"/login"},c.a.createElement(w.a,{icon:_.d}),"\xa0Login")))))),this.state.redirect?c.a.createElement(l.a,{to:"/"}):c.a.createElement(n.Fragment,null))}}]),a}(n.Component),M=Object(k.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})(P),z=a(17),J=a(31),q=(a(62),a(24)),H=Object(J.b)({accessToken:"pk.eyJ1IjoicmFnaHVyYWpqIiwiYSI6ImNrMnJpYzhzZjA2MGIzZXBkb2oxYnV2MWQifQ.1PinwGk6Y3P0q-l7SXkfWg"}),W=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={topic:"",description:"",lattitude:"",longitude:""},n.getLocation=n.getLocation.bind(Object(u.a)(n)),n.getCoordinates=n.getCoordinates.bind(Object(u.a)(n)),n.onChangeInput=n.onChangeInput.bind(Object(u.a)(n)),n.onClickMap=n.onClickMap.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"getLocation",value:function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.getCoordinates):alert("Geolocation is not supported by this browser."),e.preventDefault()}},{key:"getCoordinates",value:function(e){this.setState({lattitude:e.coords.latitude,longitude:e.coords.longitude})}},{key:"onChangeInput",value:function(e){this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n,c,r,o,l,s,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!localStorage.getItem("access")){e.next=23;break}return a={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.next=5,x.a.get("/auth/users/me/",a);case 5:return n=e.sent,c=n.data.id,r=this.state.topic,o=this.state.description,l=this.state.lattitude,s=this.state.longitude,i=JSON.stringify({author:c,Category:r,description:o,latitude:l,longitude:s}),console.log(i),e.prev=13,e.next=16,x.a.post("/complaint/api/",i,a);case 16:e.sent,console.log("compliant post success"),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(13),console.log("compliant post failed");case 23:this.setState({topic:"",description:"",lattitude:"",longitude:""});case 24:case"end":return e.stop()}}),e,this,[[13,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onClickMap",value:function(e,t){this.setState({lattitude:t.lngLat.lat,longitude:t.lngLat.lng})}},{key:"render",value:function(){var e=this;return c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(t){return c.a.createElement("div",{style:t},c.a.createElement("div",{className:h.a.fitpage},c.a.createElement("div",{className:"row mb-5"},c.a.createElement("h1",null,"Add a New Complaint")),c.a.createElement("div",{className:"row mx-5"},c.a.createElement("div",{className:"col-10 col-md-5 mt-3"},c.a.createElement("form",null,c.a.createElement("div",{className:h.a.C_input},c.a.createElement("input",{onChange:e.onChangeInput,type:"text",name:"topic",placeholder:"Topic",value:e.state.topic}),c.a.createElement("br",null)),c.a.createElement("div",{className:h.a.C_input},c.a.createElement("textarea",{onChange:e.onChangeInput,type:"text",name:"description",placeholder:"Description",value:e.state.description}),c.a.createElement("br",null)),c.a.createElement("div",{className:h.a.C_input},c.a.createElement("input",{onChange:e.onChangeInput,type:"number",name:"lattitude",placeholder:"Lattitude",value:e.state.lattitude}),c.a.createElement("br",null)),c.a.createElement("div",{className:h.a.C_input},c.a.createElement("input",{onChange:e.onChangeInput,type:"number",name:"longitude",placeholder:"Longitude",value:e.state.longitude}),c.a.createElement("br",null)),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-4 mx-auto  mt-2"},c.a.createElement("button",{onClick:e.getLocation,className:"".concat(h.a.btn," ").concat(h.a.fill_button)},"getlocation")),c.a.createElement("div",{className:"col-md-4 mx-auto mt-2"},c.a.createElement("button",{onClick:e.handleSubmit,className:"".concat(h.a.btn," ").concat(h.a.fill_button)}," Submit"))))),c.a.createElement("div",{className:"col-10 col-md-5 mt-3"},c.a.createElement("div",null,c.a.createElement(H,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"60vh",width:"45vw"},center:[80.94615925,26.8467088],zoom:[5],onClick:e.onClickMap}))))))}))}}]),a}(n.Component),Y=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={complaintData:[]},n.LoadData=n.LoadData.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"LoadData",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=13;break}return t={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,x.a.get("/complaint/api/pastcomplaint/",t);case 5:a=e.sent,console.log(a.data),this.setState({complaintData:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.LoadData()}},{key:"componentDidUpdate",value:function(e){this.props.id!==e.id&&this.LoadData()}},{key:"render",value:function(){var e=this;return c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(t){return c.a.createElement("div",{style:t},c.a.createElement("div",{className:h.a.container},e.state.complaintData&&e.state.complaintData.map((function(e){return c.a.createElement(d.b,{className:h.a.linkk,to:"complaintdetail/".concat(e.pk)},c.a.createElement("div",{className:h.a.complaint},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h4",null,e.Category)),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"card-text ".concat(h.a.blackk)},e.description)))))}))))}))}}]),a}(n.Component),B=a(18),V=a(30),K=Object(k.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(j.a)(N.a.mark((function a(n){var c,r,o;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),a.prev=2,a.next=5,x.a.post("/auth/jwt/create/",r,c);case 5:o=a.sent,n({type:"LOGIN_SUCCESS",payload:o.data}),n(A()),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(2),n({type:"LOGIN_FAIL"});case 13:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,r=Object(n.useState)({email:"",password:""}),o=Object(B.a)(r,2),s=o[0],i=o[1],u=s.email,m=s.password,p=function(e){return i(Object(T.a)(Object(T.a)({},s),{},Object(z.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/google-oauth2/?redirect_uri=http://localhost:8000/google");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/facebook/?redirect_uri=http://localhost:8000/facebook");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/twitter/?redirect_uri=http://localhost:8000/twitter");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return a?c.a.createElement(l.a,{to:"/"}):c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(e){return c.a.createElement("div",{style:e},c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"row mx-3"},c.a.createElement("div",{className:"col-md-5 mx-auto my-auto"},c.a.createElement("h1",null,"Sign In"),c.a.createElement("p",null,"Sign into your Account"),c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(u,m)}(e)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email",name:"email",value:u,onChange:function(e){return p(e)},required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",name:"password",value:m,onChange:function(e){return p(e)},minLength:"6",required:!0})),c.a.createElement("button",{className:"".concat(h.a.btn," ").concat(h.a.fill_button),type:"submit"},"Login")),c.a.createElement("p",{className:"mt-3"},"OR"),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-danger",onClick:f},c.a.createElement(w.a,{icon:V.b})," \xa0Continue with google")),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-primary",onClick:b},c.a.createElement(w.a,{icon:V.a})," \xa0 Continue with facebook")),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-success",onClick:v},c.a.createElement(w.a,{icon:V.c})," \xa0Continue with twitter")),c.a.createElement("p",{className:"mt-3"},"Don't have an account? ",c.a.createElement(d.b,{to:"/signup"},"Sign Up")),c.a.createElement("p",{className:"mt-3"},"Forgot your Password? ",c.a.createElement(d.b,{to:"/reset_password"},"Reset Password"))))))}))})),X=Object(k.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{signup:function(e){var t=e.firstname,a=e.lastname,n=e.email,c=e.password,r=e.re_password;return function(){var e=Object(j.a)(N.a.mark((function e(o){var l,s,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={headers:{"Content-Type":"application/json"}},s=JSON.stringify({firstname:t,lastname:a,email:n,password:c,re_password:r}),e.prev=2,e.next=5,x.a.post("/auth/users/",s,l);case 5:i=e.sent,o({type:"SIGNUP_SUCCESS",payload:i.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"SIGNUP_FAIL"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.signup,a=e.isAuthenticated,r=Object(n.useState)({firstname:"",lastname:"",email:"",password:"",re_password:"",is_employee:!1}),o=Object(B.a)(r,2),s=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(B.a)(u,2),p=m[0],f=m[1],b=s.firstname,v=s.lastname,E=s.email,g=s.password,y=s.re_password,O=s.is_employee,_=function(e){return i(Object(T.a)(Object(T.a)({},s),{},Object(z.a)({},e.target.name,e.target.value)))},k=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/google-oauth2/?redirect_uri=http://localhost:8000/google");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/facebook/?redirect_uri=http://localhost:8000/facebook");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/auth/o/twitter/?redirect_uri=http://localhost:8000/twitter");case 3:t=e.sent,window.location.replace(t.data.authorization_url),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return a?c.a.createElement(l.a,{to:"/"}):p?c.a.createElement(l.a,{to:"login"}):c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(e){return c.a.createElement("div",{style:e},c.a.createElement("div",{className:h.a.fitpage},c.a.createElement("div",{className:"row mx-3"},c.a.createElement("div",{className:"col-md-5 mx-auto my-auto"},c.a.createElement("h1",null,"Sign Up"),c.a.createElement("p",null,"Create your Account"),c.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),g===y?(t({firstname:b,lastname:v,email:E,password:g,re_password:y}),f(!0)):alert("Both passwords must be same!"),console.log(s)}(e)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"text",placeholder:"First Name",name:"firstname",value:b,onChange:function(e){return _(e)},required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"text",placeholder:"Last Name",name:"lastname",value:v,onChange:function(e){return _(e)},required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email*",name:"email",value:E,onChange:function(e){return _(e)},required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password*",name:"password",value:g,onChange:function(e){return _(e)},minLength:"6",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"password",placeholder:"Confirm Password*",name:"re_password",value:y,onChange:function(e){return _(e)},minLength:"6",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("p",null,"Is Employee?")),c.a.createElement("div",{className:"col"},c.a.createElement("input",{className:"form-control",type:"checkbox",name:"is_employee",onChange:function(e){return function(e){return i(Object(T.a)(Object(T.a)({},s),{},Object(z.a)({},e.target.name,e.target.checked)))}(e)}})))),O?c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col col-3"},c.a.createElement("p",null,"ID Card")),c.a.createElement("div",{className:"col"},c.a.createElement("input",{className:"form-control",type:"file",placeholder:"Upload Image",required:!0})))):null,c.a.createElement("button",{className:"".concat(h.a.btn," ").concat(h.a.fill_button),type:"submit"},"Register")),c.a.createElement("p",{className:"mt-3"},"OR"),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-danger",onClick:k},c.a.createElement(w.a,{icon:V.b})," \xa0Continue with google")),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-primary",onClick:C},c.a.createElement(w.a,{icon:V.a})," \xa0 Continue with facebook")),c.a.createElement("p",{className:"mt-3"},c.a.createElement("button",{className:"btn btn-success",onClick:S},c.a.createElement(w.a,{icon:V.c})," \xa0Continue with twitter")),c.a.createElement("p",{className:"mt-3"},"Already have an account? ",c.a.createElement(d.b,{to:"/login"},"Sign In"))))))}))})),Z=(n.Component,function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={complaintData:[]},n.LoadData=n.LoadData.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"LoadData",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=13;break}return t={headers:{"Content-Type":"application/json",Accept:"application/json"}},e.prev=2,e.next=5,x.a.get("/complaint/api/",t);case 5:a=e.sent,console.log(a.data),this.setState({complaintData:a.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.LoadData()}},{key:"componentDidUpdate",value:function(e){this.props.id!==e.id&&this.LoadData()}},{key:"render",value:function(){var e=this;return c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(t){return c.a.createElement("div",{style:t},c.a.createElement("div",{className:h.a.container},e.state.complaintData&&e.state.complaintData.map((function(e){return c.a.createElement(d.b,{className:h.a.linkk,to:"complaintdetail/".concat(e.pk)},c.a.createElement("div",{className:h.a.complaint},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("h4",null,e.Category)),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",{className:"card-text ".concat(h.a.blackk)},e.description)))))}))))}))}}]),a}(n.Component)),Q=Object(k.b)(null,{reset_password:function(e){return function(){var t=Object(j.a)(N.a.mark((function t(a){var n,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},c=JSON.stringify({email:e}),t.prev=2,t.next=5,x.a.post("/auth/users/reset_password/",c,n);case 5:r=t.sent,a({type:"RESET_PASSWORD_SUCCESS",payload:r.data}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),a({type:"RESET_PASSWORD_FAIL"});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(B.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)({email:""}),i=Object(B.a)(s,2),u=i[0],m=i[1],p=u.email;return r?c.a.createElement(l.a,{to:"/"}):c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Request Password Reset:"),c.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.reset_password(p),o(!0)}(t)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"email",placeholder:"Your Email",name:"email",value:p,onChange:function(e){return function(e){return m(Object(T.a)(Object(T.a)({},u),{},Object(z.a)({},e.target.name,e.target.value)))}(e)},required:!0})),c.a.createElement("button",{className:"".concat(h.a.btn," ").concat(h.a.fill_button),type:"submit"},"Reset Password"))))})),$=Object(k.b)(null,{reset_password_confirm:function(e,t,a,n){return function(){var c=Object(j.a)(N.a.mark((function c(r){var o,l,s;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o={headers:{"Content-Type":"application/json"}},l=JSON.stringify({uid:e,token:t,new_password:a,re_new_password:n}),c.prev=2,c.next=5,x.a.post("/auth/users/reset_password_confirm/",l,o);case 5:s=c.sent,r({type:"RESET_PASSWORD_CONFIRM_SUCCESS",payload:s.data}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),r({type:"RESET_PASSWORD_CONFIRM_FAIL"});case 12:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(B.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)({new_password:"",re_new_password:""}),i=Object(B.a)(s,2),u=i[0],m=i[1],p=u.new_password,d=u.re_new_password,f=function(e){return m(Object(T.a)(Object(T.a)({},u),{},Object(z.a)({},e.target.name,e.target.value)))};return r?c.a.createElement(l.a,{to:"/"}):c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var a=e.match.params.uid,n=e.match.params.token;e.reset_password_confirm(a,n,p,d),o(!0)}(t)}},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"password",placeholder:"New Password",name:"new_password",value:p,onChange:function(e){return f(e)},minLength:"6",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{className:"form-control",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:d,onChange:function(e){return f(e)},minLength:"6",required:!0})),c.a.createElement("button",{className:"".concat(h.a.btn," ").concat(h.a.fill_button),type:"submit"},"Reset Password"))))})),ee=Object(k.b)(null,{verify:function(e,t){return function(){var a=Object(j.a)(N.a.mark((function a(n){var c,r,o;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={headers:{"Content-Type":"application/json"}},r=JSON.stringify({uid:e,token:t}),a.prev=2,a.next=5,x.a.post("/auth/users/activation/",r,c);case 5:o=a.sent,n({type:"ACTIVATION_SUCCESS",payload:o.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),n({type:"ACTIVATION_FAIL"});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(n.useState)(!1),a=Object(B.a)(t,2),r=a[0],o=a[1];return r?c.a.createElement(l.a,{to:"/"}):c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"container"},c.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",marginTop:"200px"}},c.a.createElement("h1",null,"Verify your Account:"),c.a.createElement("button",{onClick:function(t){var a=e.match.params.uid,n=e.match.params.token;e.verify(a,n),o(!0)},style:{marginTop:"50px"},type:"button",className:"".concat(h.a.btn," ").concat(h.a.fill_button)},"Verify"))))})),te=function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"Opps! wrong page!!"))},ae=Object(J.b)({accessToken:"pk.eyJ1IjoicmFnaHVyYWpqIiwiYSI6ImNrMnJpYzhzZjA2MGIzZXBkb2oxYnV2MWQifQ.1PinwGk6Y3P0q-l7SXkfWg"}),ne=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={complaintData:""},n.LoadData=n.LoadData.bind(Object(u.a)(n)),n}return Object(i.a)(a,[{key:"LoadData",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=15;break}return t={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,a=window.location.pathname.split("/")[2],n="/complaint/api/pastcomplaint/"+a+"/",e.next=7,x.a.get(n,t);case 7:c=e.sent,console.log(c.data),this.setState({complaintData:c.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.LoadData()}},{key:"componentDidUpdate",value:function(e){this.props.id!==e.id&&this.LoadData()}},{key:"render",value:function(){var e=this;return c.a.createElement(q.Spring,{from:{opacity:0,marginLeft:-500},to:{opacity:1,marginLeft:0},config:{duration:1e3}},(function(t){return c.a.createElement("div",{style:t},c.a.createElement("div",{className:h.a.container},c.a.createElement("div",{className:"row"},c.a.createElement("h1",null,e.state.complaintData[0]?e.state.complaintData[0].Category:"Category")),c.a.createElement("div",{className:"row my-5 mx-5"},c.a.createElement("div",{className:"col-10 col-md-5 mt-3 ".concat(h.a.c_detail)},c.a.createElement("p",null,e.state.complaintData[0]?e.state.complaintData[0].description:"description"),c.a.createElement("br",null),c.a.createElement("p",null,e.state.complaintData[0]?e.state.complaintData[0].latitude:"latitude"),c.a.createElement("p",null,e.state.complaintData[0]?e.state.complaintData[0].longitude:"longitude")),c.a.createElement("div",{className:"col-10 col-md-5 pr-5"},c.a.createElement(ae,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"60vh",width:"40vw"},center:e.state.complaintData[0]?[e.state.complaintData[0].longitude,e.state.complaintData[0].latitude]:[80.94615925,26.8467088],zoom:[5]},e.state.complaintData[0]?c.a.createElement(J.a,{coordinates:[e.state.complaintData[0].longitude,e.state.complaintData[0].latitude],anchor:"bottom",width:"10px",height:"10px"},c.a.createElement("div",{className:h.a.mapMarkerStyle})):c.a.createElement(J.a,{coordinates:[80.94615925,26.8467088],anchor:"bottom",width:"10px",height:"10px"},c.a.createElement("div",{className:h.a.mapMarkerStyle})))))))}))}}]),a}(n.Component),ce=Object(k.b)(null,{checkAuthenticated:function(){return function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof window&&t({type:"AUTHENTICATED_FAIL"}),!localStorage.getItem("access")){e.next=16;break}return a={headers:{Accept:"application/json","Content-Type":"application/json"}},n=JSON.stringify({token:localStorage.getItem("access")}),e.prev=4,e.next=7,x.a.post("/auth/jwt/verify/",n,a);case 7:"token_not_valid"!==e.sent.data.code?t({type:"AUTHENTICATED_SUCCESS"}):t({type:"AUTHENTICATED_FAIL"}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t({type:"AUTHENTICATED_FAIL"});case 14:e.next=17;break;case 16:t({type:"AUTHENTICATED_FAIL"});case 17:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},load_user:A})((function(e){var t=e.checkAuthenticated,a=e.load_user,r=e.children;return Object(n.useEffect)((function(){t(),a()}),[]),c.a.createElement("div",null,c.a.createElement(M,null),r)})),re=a(36),oe=a.n(re),le=Object(k.b)(null,{facebookAuthenticate:function(e,t){return function(){var a=Object(j.a)(N.a.mark((function a(n){var c,r,o,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e||!t||localStorage.getItem("access")){a.next=15;break}return c={headers:{"Content-Type":"application/x-www-form-urlencoded"}},r={state:e,code:t},o=Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"),a.prev=4,a.next=7,x.a.post("/auth/o/facebook/?".concat(o),c);case 7:l=a.sent,n({type:"FACEBOOK_AUTH_SUCCESS",payload:l.data}),n(A()),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),n({type:"FACEBOOK_AUTH_FAIL"});case 15:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.facebookAuthenticate,a=Object(l.g)();return Object(n.useEffect)((function(){var e=oe.a.parse(a.search),n=e.state?e.state:null,c=e.code?e.code:null;console.log("State: "+n),console.log("Code: "+c),n&&c&&t(n,c)}),[a]),c.a.createElement(Z,null)})),se=Object(k.b)(null,{googleAuthenticate:function(e,t){return function(){var a=Object(j.a)(N.a.mark((function a(n){var c,r,o,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e||!t||localStorage.getItem("access")){a.next=15;break}return c={headers:{"Content-Type":"application/x-www-form-urlencoded"}},r={state:e,code:t},o=Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&"),a.prev=4,a.next=7,x.a.post("/auth/o/google-oauth2/?".concat(o),c);case 7:l=a.sent,n({type:"GOOGLE_AUTH_SUCCESS",payload:l.data}),n(A()),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(4),n({type:"GOOGLE_AUTH_FAIL"});case 15:case"end":return a.stop()}}),a,null,[[4,12]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.googleAuthenticate,a=Object(l.g)();return Object(n.useEffect)((function(){var e=oe.a.parse(a.search),n=e.state?e.state:null,c=e.code?e.code:null;console.log("State: "+n),console.log("Code: "+c),n&&c&&t(n,c)}),[a]),c.a.createElement(Z,null)}));var ie=function(){return c.a.createElement("div",null,c.a.createElement(k.a,{store:G},c.a.createElement(ce,null,c.a.createElement(l.d,null,c.a.createElement(l.b,{exact:!0,path:"/",component:Z}),c.a.createElement(l.b,{exact:!0,path:"/newcomplaint",component:W}),c.a.createElement(l.b,{exact:!0,path:"/pastcomplaints",component:Y}),c.a.createElement(l.b,{exact:!0,path:"/complaintdetail/:pk",component:ne}),c.a.createElement(l.b,{exact:!0,path:"/login",component:K}),c.a.createElement(l.b,{exact:!0,path:"/signup",component:X}),c.a.createElement(l.b,{exact:!0,path:"/google",component:se}),c.a.createElement(l.b,{exact:!0,path:"/facebook",component:le}),c.a.createElement(l.b,{exact:!0,path:"/reset_password",component:Q}),c.a.createElement(l.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:$}),c.a.createElement(l.b,{exact:!0,path:"/activate/:uid/:token",component:ee}),c.a.createElement(l.b,{component:te})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(d.a,null,c.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},2:function(e,t,a){e.exports={nvbr:"Components_nvbr__3iG-Z",navlink:"Components_navlink__24IkJ",toggler:"Components_toggler__2Yk1k",container:"Components_container__3jssv",btn:"Components_btn__1U7OY",fill_button:"Components_fill_button__3WKKB",empty_button:"Components_empty_button__26J0a",form:"Components_form__2izBT",C_input:"Components_C_input__HAbIC",complaint:"Components_complaint__3Ukaq",blackk:"Components_blackk__3cxl4",linkk:"Components_linkk__1GeqS",c_detail:"Components_c_detail__2hfV2",fitpage:"Components_fitpage__3lYhw",overflow_scroll:"Components_overflow_scroll__1VCd2",mapMarkerStyle:"Components_mapMarkerStyle__35Xfg"}},69:function(e,t,a){e.exports=a(126)},74:function(e,t,a){},75:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.b72031b3.chunk.js.map